{% extends "layout.html" %}

{% block title %}Articles - {{ category.name }} - AEEEGS{% endblock %}

{% block content %}
<h1>Articles dans la catégorie : {{ category.name }}</h1>

<div class="row">
  <div class="col-lg-8">
    {% if articles|length > 0 %}
      {% for article in articles %}
        <div class="card mb-4">
          {% if article.image_filename %}
            <img class="card-img-top" src="{{ url_for('static', filename='uploads/' ~ article.image_filename) }}" alt="image article" />
          {% endif %}
          <div class="card-body">
            <div class="small text-muted">{{ article.date_posted.strftime('%d %B %Y') }}</div>
            <h2 class="card-title">{{ article.title }}</h2>
            <p class="card-text">{{ article.content[:200] }}...</p>
            <a href="{{ url_for('post', post_id=article.id) }}" class="btn btn-primary">Lire plus →</a>
          </div>
          <div class="card-footer text-muted">
            Posté par {{ article.author.username if article.author else 'Anonyme' }}
          </div>
        </div>
      {% endfor %}
    {% else %}
      <p>Aucun article dans cette catégorie.</p>
    {% endif %}
  </div>

  <div class="col-lg-4">
    <div class="card mb-4">
      <div class="card-header">Catégories</div>
      <div class="card-body">
        <ul class="list-unstyled mb-0">
          {% for cat in categories %}
            <li><a href="{{ url_for('posts_by_category', category_id=cat.id) }}">{{ cat.name }}</a></li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>
</div>
{% endblock %}
